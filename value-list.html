<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wild Era Wiki - Advanced Trading</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --orange: #ff7f00;
            --purple: #9d00ff;
            --black: #000000;
            --dark-grey: #1a1a1a;
            --white: #FFFFFF;
            --win-green: #00ff00;
            --lose-red: #ff0000;

            --glow-orange: 0 0 5px var(--orange), 0 0 10px var(--orange);
            --glow-purple: 0 0 8px var(--purple), 0 0 15px var(--purple);
            --glow-green: 0 0 8px var(--win-green), 0 0 15px var(--win-green);
            --glow-red: 0 0 8px var(--lose-red), 0 0 15px var(--lose-red);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Press Start 2P', cursive;
            background-color: var(--black);
            color: var(--orange);
            text-shadow: 1px 1px 2px var(--black);
            overflow-x: hidden;
            background-image: radial-gradient(circle, #222 0%, var(--black) 80%);
        }
        
        /* Scanlines Overlay */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.3) 0, rgba(0,0,0,0.3) 1px, transparent 1px, transparent 2px);
            pointer-events: none;
            z-index: 1000;
        }

        .container { max-width: 1400px; margin: auto; padding: 20px; }
        
        h1, h2 {
            text-align: center;
            margin-bottom: 25px;
            color: var(--orange);
            text-shadow: var(--glow-orange);
            animation: text-flicker 4s linear infinite;
            font-size: 2rem;
            letter-spacing: 2px;
        }
        h2 { font-size: 1.8rem; margin-top: 50px; color: var(--white); }
        h2::before, h2::after { content: " -= "; color: var(--purple); }

        /* --- Custom Select Dropdown --- */
        .custom-select-wrapper { position: relative; width: 100%; margin-bottom: 10px; font-size: 0.8rem; }
        .custom-select-trigger {
            width: 100%;
            padding: 12px;
            background: #111;
            color: var(--orange);
            border: 2px solid var(--orange);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: box-shadow 0.2s;
        }
        .custom-select-trigger:hover, .custom-select-wrapper.active .custom-select-trigger { box-shadow: var(--glow-orange); }
        .custom-select-trigger::after {
            content: '';
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid var(--orange);
            transition: transform 0.3s ease;
        }
        .custom-select-wrapper.active .custom-select-trigger::after { transform: rotate(180deg); }
        .custom-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #111;
            border: 2px solid var(--orange);
            border-top: none;
            z-index: 100;
            max-height: 200px;
            overflow-y: auto;
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.2s ease-out;
            visibility: hidden;
        }
        .custom-select-wrapper.active .custom-options { transform: scaleY(1); visibility: visible; }
        .custom-option {
            padding: 12px;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .custom-option:hover { background: var(--orange); color: var(--black); text-shadow: none; }
        .custom-option.selected { background: var(--purple); color: var(--white); }
        
        /* Custom Scrollbar */
        .custom-options::-webkit-scrollbar { width: 8px; }
        .custom-options::-webkit-scrollbar-track { background: var(--black); }
        .custom-options::-webkit-scrollbar-thumb { background: var(--orange); }

        /* --- Enhanced Trading UI --- */
        .trade-container {
            border: 4px solid var(--purple);
            box-shadow: var(--glow-purple);
            padding: 20px;
            background: var(--dark-grey);
        }

        .trade-interface {
            display: flex;
            flex-direction: column; /* Mobile First */
            gap: 20px;
        }
        
        .trade-side {
            padding: 15px;
            border: 2px solid #444;
            display: flex;
            flex-direction: column;
        }
        
        .trade-side h3 {
            text-align: center; margin-bottom: 15px; font-size: 1.5rem;
            padding: 5px; border-bottom: 2px solid;
        }
        #your-side h3 { color: var(--orange); border-color: var(--orange); text-shadow: var(--glow-orange); }
        #their-side h3 { color: var(--win-green); border-color: var(--win-green); text-shadow: var(--glow-green); }

        .total-value-display {
            text-align: center; font-size: 1.5rem; margin-bottom: 20px;
            padding: 10px; background: #000; border: 2px solid var(--purple);
        }

        .trade-controls input {
            width: 100%; padding: 12px; margin-bottom: 10px; background: #111;
            color: var(--orange); border: 2px solid var(--orange);
            font-family: 'Press Start 2P', cursive; font-size: 0.8rem;
        }
        .trade-controls button {
            width: 100%; padding: 12px; margin-top: 5px;
            background: var(--orange); color: var(--black); border: none;
            cursor: pointer; font-family: 'Press Start 2P', cursive;
            transition: all 0.2s; text-shadow: none;
        }
        .trade-controls button:hover { box-shadow: var(--glow-orange); }
        
        .offer-box {
            flex-grow: 1;
            background-color: #080808;
            background-image: linear-gradient(rgba(157, 0, 255, 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(157, 0, 255, 0.08) 1px, transparent 1px);
            background-size: 20px 20px;
            border: 2px dashed var(--purple);
            padding: 10px; min-height: 250px;
        }
        
        .offer-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px; background: rgba(0,0,0,0.6); margin-bottom: 8px;
            font-size: 0.8rem; border-left: 3px solid var(--orange);
        }
        .offer-item button {
            background: var(--lose-red); color: var(--white);
            border: none; padding: 4px 8px; cursor: pointer;
        }

        .trade-separator { display: none; } /* Hidden on mobile */
        
        #compare-button {
            display: block; width: 100%; padding: 20px; font-size: 1.5rem;
            background: var(--purple); color: var(--white);
            border: 3px solid var(--white); cursor: pointer;
            transition: all 0.2s; animation: pulse 2s infinite;
        }
        #compare-button:hover { box-shadow: var(--glow-purple); }

        #result-display {
            margin-top: 30px; padding: 20px; text-align: center;
            font-size: 1.5rem; text-transform: uppercase;
            transform: scale(0); transition: transform 0.3s ease-in-out;
        }
        #result-display.visible { transform: scale(1); }

        .fair-trade { color: var(--white); background: #555; }
        .win { color: var(--black); background: var(--win-green); text-shadow: none; }
        .big-win { color: var(--black); background: var(--win-green); animation: text-flicker 1s infinite; text-shadow: none; }
        .lose { color: var(--white); background: var(--lose-red); }
        .big-lose { color: var--white); background: var(--lose-red); animation: text-flicker 1s infinite; }
        
        /* --- Desktop & Tablet Layout --- */
        @media (min-width: 900px) {
            h1 { font-size: 2.5rem; }
            .trade-interface { flex-direction: row; align-items: stretch; }
            .trade-side { width: 45%; }
            .trade-separator {
                display: flex; align-items: center; justify-content: center;
                font-size: 3rem; color: var(--purple); text-shadow: var(--glow-purple);
            }
            #result-display { font-size: 2rem; }
        }

        @keyframes text-flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

    </style>
</head>
<body>

<div class="container">
    
    <!-- You can place the value list grids here if desired -->

    <h2>Trade Simulator</h2>
    <div class="trade-container">
        <div class="trade-interface">
            <!-- Your Offer Side -->
            <div class="trade-side" id="your-side">
                <h3>PLAYER 1</h3>
                <div class="total-value-display" id="your-total-value">0 DNA</div>
                <div class="trade-controls">
                    <!-- Custom Select for Your Items -->
                    <div class="custom-select-wrapper" id="your-item-select-wrapper">
                        <div class="custom-select-trigger"><span>--- Select an Item ---</span></div>
                        <div class="custom-options"></div>
                    </div>
                    <button id="add-your-item">Add Item</button>
                    <input type="number" id="your-dna-input" min="0" placeholder="Enter DNA amount">
                </div>
                <div class="offer-box" id="your-offer-box"></div>
            </div>

            <div class="trade-separator">VS</div>

            <!-- Their Offer Side -->
            <div class="trade-side" id="their-side">
                <h3>PLAYER 2</h3>
                <div class="total-value-display" id="their-total-value">0 DNA</div>
                 <div class="trade-controls">
                    <!-- Custom Select for Their Items -->
                    <div class="custom-select-wrapper" id="their-item-select-wrapper">
                        <div class="custom-select-trigger"><span>--- Select an Item ---</span></div>
                        <div class="custom-options"></div>
                    </div>
                    <button id="add-their-item">Add Item</button>
                    <input type="number" id="their-dna-input" min="0" placeholder="Enter DNA amount">
                </div>
                <div class="offer-box" id="their-offer-box"></div>
            </div>
        </div>
        <div class="comparator-actions" style="margin-top: 30px;">
             <button id="compare-button">ANALYZE</button>
        </div>
        <div id="result-display"></div>
    </div>
</div>

<script>
    const tradeValues = {
        "PBC": 170000, "Movie Brachio": 111000, "Movie Mosa": 90000, "Suited Capy": 90000,
        "Movie Spino": 80000, "Indor Bone": 76000, "Movie Rex": 73000, "Carnage Cerato": 70000,
        "Movie Trike": 69000, "Indom Bone": 67000, "Carnage Rex": 53000, "Carnage Pachy": 50000,
        "Carnage Spino": 45000, "Alpha Indom": 33000, "Albino Indor": 33000, "CowBoy Dilo": 26000,
        "Jurassic Utah": 20000, "Salmononto": 17000
    };

    let yourOffer = {};
    let theirOffer = {};
    
    function createCustomSelect(wrapperId) {
        const wrapper = document.getElementById(wrapperId);
        const trigger = wrapper.querySelector('.custom-select-trigger');
        const optionsContainer = wrapper.querySelector('.custom-options');
        let selectedValue = "";

        Object.keys(tradeValues).forEach(item => {
            const option = document.createElement('div');
            option.className = 'custom-option';
            option.dataset.value = item;
            option.textContent = `${item} (${tradeValues[item].toLocaleString()} DNA)`;
            option.addEventListener('click', () => {
                selectedValue = item;
                trigger.querySelector('span').textContent = item;
                wrapper.classList.remove('active');
            });
            optionsContainer.appendChild(option);
        });

        trigger.addEventListener('click', () => wrapper.classList.toggle('active'));
        
        return {
            getValue: () => selectedValue,
            reset: () => {
                selectedValue = "";
                trigger.querySelector('span').textContent = "--- Select an Item ---";
            }
        };
    }

    const yourSelect = createCustomSelect('your-item-select-wrapper');
    const theirSelect = createCustomSelect('their-item-select-wrapper');

    function setupSide(side, customSelect) {
        document.getElementById(`add-${side}-item`).addEventListener('click', () => addItem(side, customSelect));
        document.getElementById(`${side}-dna-input`).addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addDna(side);
        });
    }

    function addItem(side, customSelect) {
        const selectedItem = customSelect.getValue();
        const offer = side === 'your' ? yourOffer : theirOffer;
        if (selectedItem) {
            offer[selectedItem] = (offer[selectedItem] || 0) + 1;
            updateUI();
        }
    }

    function addDna(side) {
        const input = document.getElementById(`${side}-dna-input`);
        const dnaAmount = parseInt(input.value, 10);
        const offer = side === 'your' ? yourOffer : theirOffer;
        if (!isNaN(dnaAmount) && dnaAmount > 0) {
            offer['DNA'] = (offer['DNA'] || 0) + dnaAmount;
            input.value = '';
            updateUI();
        }
    }

    function removeItem(side, item) {
        const offer = side === 'your' ? yourOffer : theirOffer;
        if (item === 'DNA') delete offer['DNA'];
        else {
            offer[item]--;
            if (offer[item] <= 0) delete offer[item];
        }
        updateUI();
    }

    function calculateTotal(offer) {
        return Object.keys(offer).reduce((total, item) => {
            return total + (item === 'DNA' ? offer[item] : tradeValues[item] * offer[item]);
        }, 0);
    }
    
    function updateUI() {
        updateOfferBox('your', yourOffer);
        updateOfferBox('their', theirOffer);
        document.getElementById('your-total-value').textContent = `${calculateTotal(yourOffer).toLocaleString()} DNA`;
        document.getElementById('their-total-value').textContent = `${calculateTotal(theirOffer).toLocaleString()} DNA`;
    }

    function updateOfferBox(side, offer) {
        const box = document.getElementById(`${side}-offer-box`);
        box.innerHTML = '';
        Object.keys(offer).sort().forEach(item => {
            const div = document.createElement('div');
            div.className = 'offer-item';
            div.innerHTML = `<span>${offer[item].toLocaleString()}x ${item}</span><button>X</button>`;
            div.querySelector('button').addEventListener('click', () => removeItem(side, item));
            box.appendChild(div);
        });
    }

    function compareTrades() {
        const yourTotal = calculateTotal(yourOffer);
        const theirTotal = calculateTotal(theirOffer);
        const difference = theirTotal - yourTotal;
        const resultDisplay = document.getElementById('result-display');
        const percentageDiff = yourTotal > 0 ? Math.abs(difference) / yourTotal : 1;

        let resultText, resultClass;
        if (yourTotal === 0 || theirTotal === 0) {
            resultText = "INCOMPLETE TRADE"; resultClass = 'lose';
        } else if (percentageDiff < 0.05) {
            resultText = "Fair Trade!"; resultClass = 'fair-trade';
        } else if (difference > 0) {
            resultText = `Win! (+${difference.toLocaleString()} DNA)`;
            resultClass = percentageDiff > 0.25 ? 'big-win' : 'win';
        } else {
            resultText = `Lose! (${difference.toLocaleString()} DNA)`;
            resultClass = percentageDiff > 0.25 ? 'big-lose' : 'lose';
        }
        
        resultDisplay.textContent = resultText;
        resultDisplay.className = resultClass;
        resultDisplay.classList.add('visible');
    }
    
    // Global click listener to close custom selects when clicking outside
    window.addEventListener('click', (e) => {
        if (!e.target.closest('.custom-select-wrapper')) {
            document.querySelectorAll('.custom-select-wrapper').forEach(w => w.classList.remove('active'));
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        setupSide('your', yourSelect);
        setupSide('their', theirSelect);
        document.getElementById('compare-button').addEventListener('click', compareTrades);
    });
</script>

</body>
</html>
